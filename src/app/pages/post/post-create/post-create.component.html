<!-- post-create.component.html -->
<div class="max-w-2xl mx-auto p-6 space-y-6">
  @if (isLoading) {
    <div class="flex justify-center items-center min-h-[200px]">
      <hlm-spinner class="h-8 w-8" />
    </div>
  } @else {
    <form (submit)="onSavePost(postForm)" #postForm="ngForm">
      <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
        <h2 class="text-2xl font-bold mb-4">{{ mode === 'create' ? 'Create' : 'Edit' }} Post</h2>

        <!-- Title Input -->
        <div class="mb-4">
          <input
            name="title"
            [ngModel]="post.title"
            required
            minlength="3"
            #title="ngModel"
            class="w-full p-3 border border-gray-200 rounded-lg
                   focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                   transition-all bg-gray-50"
            placeholder="Post Title"
          />
          <app-error
            [errorMessage]="title.invalid && (title.dirty || title.touched) ?
              (title.errors?.['required'] ? 'Title is required' :
               title.errors?.['minlength'] ? 'Title must be at least 3 characters' : null) : null"
          ></app-error>
        </div>

        <!-- Content Textarea -->
        <div class="mb-4">
          <textarea
            name="content"
            [ngModel]="post.content"
            required
            minlength="3"
            #content="ngModel"
            class="w-full min-h-[150px] p-4 border border-gray-200 rounded-lg
                   focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                   transition-all resize-none bg-gray-50"
            placeholder="What's on your mind?"
          ></textarea>
          <app-error
            [errorMessage]="content.invalid && (content.dirty || content.touched) ?
              (content.errors?.['required'] ? 'Content is required' :
               content.errors?.['minlength'] ? 'Content must be at least 3 characters' : null) : null"
          ></app-error>
        </div>

        <!-- Action Buttons -->
        <div class="mt-4 flex justify-end">
          <button
            hlmBtn
            variant="default"
            type="submit"
            [disabled]="!postForm.valid"
            [class.opacity-50]="!postForm.valid"
          >
            {{ mode === 'create' ? 'Post' : 'Update' }}
          </button>
        </div>
      </div>
    </form>
  }
</div>
